<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊäΩÈÅ∏ÂøúÂãü„Ç®„Éº„Ç∏„Çß„É≥„Éà | Nintendo Switch 2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Hiragino Sans', 'Yu Gothic UI', sans-serif;
            background: linear-gradient(135deg, #fafafa 0%, #f0f2f5 100%);
            color: #333;
            line-height: 1.5;
            padding: 20px 2px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="0.5" fill="rgba(74,85,104,0.03)"/><circle cx="80" cy="20" r="0.3" fill="rgba(74,85,104,0.03)"/><circle cx="50" cy="50" r="0.4" fill="rgba(74,85,104,0.03)"/><circle cx="30" cy="80" r="0.3" fill="rgba(74,85,104,0.03)"/><circle cx="70" cy="70" r="0.5" fill="rgba(74,85,104,0.03)"/></svg>');
            animation: float 30s infinite linear;
            z-index: 0;
            pointer-events: none;
        }

        @keyframes float {
            0% {
                transform: translateX(-50px) translateY(-50px);
            }

            100% {
                transform: translateX(50px) translateY(50px);
            }
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
            overflow: hidden;
            position: relative;
            z-index: 1;
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
            color: white;
            padding: 24px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% {
                left: -100%;
            }

            100% {
                left: 100%;
            }
        }

        h1 {
            font-size: 1.9rem;
            font-weight: 600;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .subtitle {
            font-size: 0.95rem;
            opacity: 0.95;
            margin-bottom: 4px;
            position: relative;
            z-index: 1;
        }

        .update-note {
            font-size: 0.85rem;
            opacity: 0.85;
            background: rgba(255, 255, 255, 0.15);
            padding: 8px 16px;
            border-radius: 4px;
            display: inline-block;
            margin-top: 8px;
            position: relative;
            z-index: 1;
        }

        .search-section {
            padding: 16px 24px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .search-box {
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: center;
        }

        .search-input {
            padding: 8px 16px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 0.9rem;
            width: 300px;
            transition: all 0.3s ease;
            background: white;
        }

        .search-input:focus {
            outline: none;
            border-color: #495057;
            box-shadow: 0 0 0 2px rgba(73, 80, 87, 0.1);
        }

        .filter-section {
            padding: 16px 24px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .filter-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            align-items: center;
            justify-content: center;
        }

        .filter-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid #dee2e6;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            color: #495057;
            position: relative;
            overflow: hidden;
        }

        .filter-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(73, 80, 87, 0.1), transparent);
            transition: left 0.4s;
        }

        .filter-btn:hover::before {
            left: 100%;
        }

        .filter-btn.active {
            background: #495057;
            color: white;
            border-color: #495057;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(73, 80, 87, 0.2);
        }

        .filter-btn:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .filter-btn.active:hover {
            background: #495057;
        }

        .table-container {
            overflow-x: auto;
            padding: 0;
            position: relative;
        }

        .scroll-indicator-top,
        .scroll-indicator-bottom {
            display: none;
            height: 8px;
            background: linear-gradient(90deg, #dee2e6, #6c757d, #dee2e6);
            border-radius: 4px;
            margin: 0 10px;
            opacity: 0.7;
        }

        .scroll-indicator-top {
            margin-bottom: 5px;
        }

        .scroll-indicator-bottom {
            margin-top: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            border-spacing: 0;
        }

        th {
            background: #f8f9fa;
            color: #495057;
            padding: 16px 10px;
            font-weight: 600;
            text-align: left;
            border-bottom: 2px solid #dee2e6;
            white-space: nowrap;
            vertical-align: middle;
            position: relative;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
        }

        th:hover {
            background: #e9ecef;
        }

        th.sortable::after {
            content: ' ‚áÖ';
            color: #6c757d;
            font-size: 0.8em;
            margin-left: 4px;
        }

        th.sort-asc::after {
            content: ' ‚Üë';
            color: #495057;
            font-weight: bold;
        }

        th.sort-desc::after {
            content: ' ‚Üì';
            color: #495057;
            font-weight: bold;
        }

        th::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: #495057;
            transition: width 0.3s ease;
        }

        th:hover::before {
            width: 100%;
        }

        td {
            padding: 12px 10px !important;
            border-bottom: 1px solid #f1f3f4;
            vertical-align: middle;
            text-align: left;
            transition: all 0.2s ease;
        }

        td:nth-child(3),
        td:nth-child(4) {
            white-space: nowrap;
        }

        tr:hover {
            background: #f8f9fa;
            transform: scale(1.001);
        }

        .urgent {
            background: linear-gradient(90deg, #fff5f5, #ffffff);
            border-left: 3px solid #dc3545;
            animation: urgentPulse 2s infinite;
        }

        @keyframes urgentPulse {

            0%,
            100% {
                border-left-color: #dc3545;
            }

            50% {
                border-left-color: #ff6b7a;
            }
        }

        .today-ending {
            background: linear-gradient(90deg, #fff3cd, #ffffff);
            border-left: 3px solid #ffc107;
        }

        .very-urgent {
            background: linear-gradient(90deg, #ffe6e6, #ffffff);
            border-left: 3px solid #ff0000;
            animation: veryUrgentPulse 1s infinite;
        }

        @keyframes veryUrgentPulse {

            0%,
            100% {
                border-left-color: #ff0000;
                box-shadow: inset 0 0 5px rgba(255, 0, 0, 0.1);
            }

            50% {
                border-left-color: #ff4444;
                box-shadow: inset 0 0 10px rgba(255, 0, 0, 0.2);
            }
        }

        .store-name {
            font-weight: 600;
            color: #2d3748;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .store-type {
            font-size: 11px;
            color: #6c757d;
            margin-top: 2px;
        }

        .new-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(45deg, #ff4757, #ff6b7a);
            color: white;
            font-size: 9px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 6px rgba(255, 71, 87, 0.3);
            animation: newBadgePulse 2s infinite ease-in-out;
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .new-badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: newBadgeShine 3s infinite;
        }

        @keyframes newBadgePulse {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 2px 6px rgba(255, 71, 87, 0.3);
            }

            50% {
                transform: scale(1.05);
                box-shadow: 0 3px 12px rgba(255, 71, 87, 0.5);
            }
        }

        @keyframes newBadgeShine {
            0% {
                left: -100%;
            }

            100% {
                left: 100%;
            }
        }

        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 500;
            text-align: center;
            min-width: 65px;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            animation: glow 2s infinite;
        }

        @keyframes glow {

            0%,
            100% {
                box-shadow: 0 0 5px rgba(21, 87, 36, 0.3);
            }

            50% {
                box-shadow: 0 0 20px rgba(21, 87, 36, 0.6);
            }
        }

        .status-upcoming {
            background: #e6f7ff;
            color: #0050b3;
            border: 1px solid #91d5ff;
        }

        .status-ended {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f1b0b7;
        }

        .status-waiting {
            background: #fffbe6;
            color: #ad8b00;
            border: 1px solid #fff1b8;
        }

        .status-purchase {
            background: #e1f5fe;
            color: #01579b;
            border: 1px solid #b3e5fc;
        }

        .model {
            background: #e9ecef;
            color: #495057;
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 11px;
            display: inline-block;
            margin: 1px;
            transition: all 0.2s ease;
        }

        .model:hover {
            background: #dee2e6;
            transform: scale(1.05);
        }

        .period {
            font-weight: 500;
            color: #495057;
            font-size: 12px;
        }

        .condition {
            font-size: 12px;
            color: #6c757d;
            line-height: 1.4;
        }

        .result,
        .deadline {
            font-size: 12px;
            color: #495057;
        }

        .link-btn {
            background: #495057;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            text-decoration: none;
            font-size: 11px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-block;
            position: relative;
            overflow: hidden;
        }
        
        .app-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 80px;
            height: 28px;
            background-color: #f0f2f5;
            border-radius: 4px;
            border: 1px solid #dee2e6;
            font-size: 11px;
            font-weight: 500;
            color: #495057;
            text-decoration: none;
            gap: 4px;
        }

        .app-icon svg {
            width: 14px;
            height: 14px;
        }

        .link-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.4s;
        }

        .link-btn:hover::before {
            left: 100%;
        }

        .link-btn:hover {
            background: #343a40;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 58, 64, 0.3);
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 32px;
            padding: 16px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            font-size: 14px;
        }

        .stat-item {
            text-align: center;
            transition: transform 0.2s ease;
        }

        .stat-item:hover {
            transform: translateY(-2px);
        }

        .stat-number {
            font-size: 18px;
            font-weight: 600;
            color: #495057;
        }

        .stat-label {
            color: #6c757d;
            font-size: 12px;
            margin-top: 2px;
        }

        .section-header {
            background: #e9ecef;
            padding: 8px 16px;
            font-weight: 600;
            color: #495057;
            font-size: 13px;
            border-top: 2px solid #dee2e6;
        }

        .section-header td {
            border-bottom: 1px solid #dee2e6;
        }

        .countdown {
            font-size: 10px;
            color: #dc3545;
            font-weight: 600;
            margin-top: 2px;
        }

        .countdown.very-urgent {
            color: #ff0000;
            animation: countdownBlink 1s infinite;
        }

        @keyframes countdownBlink {

            0%,
            50% {
                opacity: 1;
            }

            51%,
            100% {
                opacity: 0.5;
            }
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #6c757d;
            font-size: 1rem;
        }

        @media (max-width: 1200px) {
            .condition {
                font-size: 10px;
            }

            .search-input {
                width: 250px;
            }

            .filter-controls {
                flex-direction: column;
                gap: 12px;
            }
        }

        @media (max-width: 768px) {
            .container {
                margin: 0 2px;
            }

            .header {
                padding: 16px;
            }

            h1 {
                font-size: 1.4rem;
            }

            th,
            td {
                padding: 8px 6px;
                font-size: 11px;
            }

            .filter-section,
            .search-section {
                padding: 12px 16px;
            }

            .search-input {
                width: 200px;
                font-size: 0.85rem;
            }

            .stats {
                gap: 20px;
                padding: 12px;
            }

            .condition {
                font-size: 9px;
            }

            .scroll-indicator-top,
            .scroll-indicator-bottom {
                display: block;
                animation: scrollHint 2s infinite ease-in-out;
            }

            .filter-controls {
                flex-direction: column;
                gap: 8px;
            }

            .new-badge {
                font-size: 8px;
                padding: 1px 4px;
            }

            .store-name {
                font-size: 12px;
                flex-wrap: wrap;
                gap: 4px;
            }
        }

        @keyframes scrollHint {

            0%,
            100% {
                opacity: 0.4;
                transform: scaleX(1);
            }

            50% {
                opacity: 0.8;
                transform: scaleX(1.1);
            }
        }

        .hidden {
            display: none;
        }

        .last-chance {
            background: linear-gradient(90deg, #ff6b6b20, #ffffff);
            border-left: 4px solid #ff6b6b;
            position: relative;
        }

        .last-chance::before {
            content: 'Êú¨Êó•Á∑†Âàá';
            position: absolute;
            top: 5px;
            right: 10px;
            background: #ff6b6b;
            color: white;
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ÊäΩÈÅ∏ÂøúÂãü„Ç®„Éº„Ç∏„Çß„É≥„Éà | Nintendo Switch 2 ÂÆåÂÖ®ÊîªÁï•</h1>
            <div class="subtitle">ÂÖ®ÂõΩ„ÅÆÊäΩÈÅ∏ÊÉÖÂ†±„ÇíÁ∂≤ÁæÖ„ÉªÂàÜÊûê„Åô„ÇãÂ∞ÇÈñÄ„Ç®„Éº„Ç∏„Çß„É≥„Éà | 2025Âπ¥6Êúà25Êó•ÁèæÂú®ÔºàÊúÄÊñ∞ÊÉÖÂ†±ÂèçÊò†ÁâàÔºâ</div>
            <div class="update-note">„ÄêÊú¨Êó•Áô∫Ë°®„Äë„ÇΩ„Éï„Éû„ÉÉ„Éó(10ÊôÇ„Äú), „Ç§„Ç™„É≥(12ÊôÇ„Äú) | „ÄêÊòéÊó•‰ª•Èôç„Äë„Éï„Ç°„Éü„Éû(26Êó•), GEO(27Êó•)„Å™„Å©Áô∫Ë°®Â§öÊï∞ÔºÅ | „ÄêÊ¨°Âõû‰∫àÂëä„Äë„Éã„É≥„ÉÜ„É≥„Éâ„Éº„Çπ„Éà„Ç¢(7Êúà‰∏äÊó¨), „Çª„Éñ„É≥„Éç„ÉÉ„Éà(6/26‰ª•Èôç)</div>
        </div>

        <div class="search-section">
            <div class="search-box">
                <input type="text" class="search-input" placeholder="Â∫óËàóÂêç„ÅßÊ§úÁ¥¢..." id="searchInput">
            </div>
        </div>

        <div class="filter-section">
            <div class="filter-controls">
                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterRows('all')">„Åô„Åπ„Å¶Ë°®Á§∫</button>
                    <button class="filter-btn" onclick="filterRows('active')">ÂøúÂãüÂèó‰ªò‰∏≠</button>
                    <button class="filter-btn" onclick="filterRows('upcoming')">ÈñãÂßã‰∫àÂÆö</button>
                    <button class="filter-btn" onclick="filterRows('waiting')">ÁµêÊûúÁô∫Ë°®ÂæÖ„Å°</button>
                    <button class="filter-btn" onclick="filterRows('purchase')">Ë≥ºÂÖ•ÊúüÈñì</button>
                </div>
            </div>
        </div>

        <div class="table-container">
            <div class="scroll-indicator-top"></div>
            <table>
                <thead>
                    <tr>
                        <th>Â∫óËàóÂêç</th>
                        <th>„Çπ„ÉÜ„Éº„Çø„Çπ</th>
                        <th>ÂøúÂãüÊñπÊ≥ï</th>
                        <th class="sortable" onclick="sortByColumn('deadline')" data-sort="deadline">Âèó‰ªòÊúüÈñì</th>
                        <th>ÂøúÂãüÊù°‰ª∂</th>
                        <th class="sortable" onclick="sortByColumn('result')" data-sort="result">ÁµêÊûúÁô∫Ë°®</th>
                        <th class="sortable" onclick="sortByColumn('purchase')" data-sort="purchase">Ë≥ºÂÖ•ÊúüÈôê</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
            <div class="scroll-indicator-bottom"></div>
            <div id="noResults" class="no-results hidden">
                Ê§úÁ¥¢Êù°‰ª∂„Å´‰∏ÄËá¥„Åô„ÇãÂ∫óËàó„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ
            </div>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="stat-active">0</div>
                <div class="stat-label">ÂøúÂãüÂèó‰ªò‰∏≠</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="stat-upcoming">0</div>
                <div class="stat-label">ÈñãÂßã‰∫àÂÆö</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="stat-waiting">0</div>
                <div class="stat-label">ÁµêÊûúÁô∫Ë°®ÂæÖ„Å°</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="stat-purchase">0</div>
                <div class="stat-label">Ë≥ºÂÖ•ÊúüÈñì</div>
            </div>
        </div>

    </div>

    <script>
        const TODAY = new Date('2025-06-25');

        function calculateStatus(item) {
            const now = new Date('2025-06-25T09:30:00');

            if (item.isOngoing && (!item.endDate || now <= item.endDate)) {
                return 'active';
            }

            if (item.resultDate && item.purchaseDate && now >= item.resultDate && now <= item.purchaseDate) {
                return 'purchase';
            }
            
            if (item.endDate && item.resultDate && now > item.endDate && now < item.resultDate) {
                return 'waiting';
            }

            if (item.startDate && item.endDate) {
                if (now >= item.startDate && now <= item.endDate) {
                    return 'active';
                }
                if (now < item.startDate) {
                    return 'upcoming';
                }
            }
            
            if (item.startDate && !item.endDate) { // ÈñãÂßã„ÅÆ„Åø„ÅßÁµÇ‰∫ÜÊú™ÂÆö„ÅÆÂ†¥Âêà
                 if (now < item.startDate) {
                    return 'upcoming';
                } else {
                    return 'active';
                }
            }
            
            // ÁµêÊûúÁô∫Ë°®„ÅÆ„Åø„ÅßÊó¢„Å´ÁµÇ‰∫Ü„Åó„Å¶„ÅÑ„ÇãÂ†¥Âêà
            if(item.resultDate && now < item.resultDate) {
                return 'waiting';
            }

            return 'ended';
        }

        function isStartedToday(item) {
            if (!item.startDate) return false;
            const startDate = new Date(item.startDate);
            const today = new Date(TODAY);
            return startDate.getFullYear() === today.getFullYear() &&
                startDate.getMonth() === today.getMonth() &&
                startDate.getDate() === today.getDate();
        }

        function isEndingToday(item) {
            if (!item.endDate) return false;
            const endDate = new Date(item.endDate);
            const today = new Date(TODAY);
            return endDate.getFullYear() === today.getFullYear() &&
                endDate.getMonth() === today.getMonth() &&
                endDate.getDate() === today.getDate();
        }

        const storeData = [
            {
                store: 'Amazon',
                storeType: 'ECÂ§ßÊâã ÊãõÂæÖÂà∂Á∂ôÁ∂ö‰∏≠',
                link: 'https://www.amazon.co.jp/dp/B0DX1BC3R8',
                app: false,
                period: 'Â∏∏ÊôÇ„É™„ÇØ„Ç®„Çπ„ÉàÂèó‰ªò‰∏≠',
                startDate: new Date('2025-04-24T10:00:00'),
                endDate: null,
                isOngoing: true,
                condition: 'Amazon„Ç¢„Ç´„Ç¶„É≥„ÉàÂøÖÈ†à„ÄÇÂïÜÂìÅ„Éö„Éº„Ç∏„ÅÆ„ÄåÊãõÂæÖ„Çí„É™„ÇØ„Ç®„Çπ„Éà„Äç„Éú„Çø„É≥„Åã„ÇâÁî≥Ëæº„ÄÇÁâπÂà•„Å™Ë≥ºÂÖ•Â±•Ê≠¥Á≠â„ÅÆÊù°‰ª∂„Å™„Åó„ÄÇ„É™„ÇØ„Ç®„Çπ„Éà„ÅØ3„É∂ÊúàÈñìÊúâÂäπ„ÄÇ',
                result: 'ÈöèÊôÇÊãõÂæÖ„É°„Éº„É´ÈÄöÁü•',
                resultDate: null,
                deadline: 'ÊãõÂæÖ„É°„Éº„É´Âèó‰ø°Âæå48ÊôÇÈñì‰ª•ÂÜÖ',
                purchaseDate: null
            },
            {
                store: '„Éé„Ç∏„Éû„Ç™„É≥„É©„Ç§„É≥',
                storeType: 'ÂÆ∂ÈõªEC „Ç∑„Éº„ÇØ„É¨„ÉÉ„ÉàË≤©Â£≤',
                link: 'https://online.nojima.co.jp/',
                app: false,
                period: '‰∏çÂÆöÊúüÈñãÂÇ¨ÔºàÂ∏∏ÊôÇ„Ç®„É≥„Éà„É™„ÉºÂèó‰ªòÔºâ',
                startDate: new Date('2025-06-10T10:00:00'),
                endDate: null,
                isOngoing: true,
                condition: '„Éé„Ç∏„Éû„Ç™„É≥„É©„Ç§„É≥‰ºöÂì°ÁôªÈå≤ÂøÖÈ†à„ÄÇ„Ç®„É≥„Éà„É™„Éº„Éö„Éº„Ç∏„Åã„ÇâÂøúÂãü„ÄÇÂÖ¨ÂºèX(@ENETJP)„Éï„Ç©„É≠„Éº„ÇÑÈÅéÂéª„ÅÆË≥ºÂÖ•Â±•Ê≠¥„ÅßÊ°àÂÜÖÁ¢∫Áéá„Åå‰∏ä„Åå„Çã„Å®„ÅÆÊÉÖÂ†±„ÅÇ„Çä„ÄÇ',
                result: '‰∏çÂÆöÊúü„ÅßÂΩìÈÅ∏ËÄÖ„ÅÆ„Åø„É°„Éº„É´Ê°àÂÜÖ',
                resultDate: null,
                deadline: 'Ê®©Âà©Áç≤Âæó„É°„Éº„É´„Å´Ë®òËºâ',
                purchaseDate: null
            },
            {
                store: '„Éû„Ç§„Éã„É≥„ÉÜ„É≥„Éâ„Éº„Çπ„Éà„Ç¢',
                storeType: '‰ªªÂ§©Â†ÇÂÖ¨Âºè Á¨¨5Âõû‰∫àÂëä',
                link: 'https://store-jp.nintendo.com/switch/',
                app: false,
                period: 'Á¨¨5Âõû„ÅØ7Êúà‰∏äÊó¨ÂÆüÊñΩ‰∫àÂÆö',
                startDate: new Date('2025-07-01T12:00:00'),
                endDate: new Date('2025-07-08T18:00:00'),
                condition: 'Ë©≥Á¥∞„ÅØÂæåÊó•Áô∫Ë°®„ÄÇÂèÇËÄÉ(ÂâçÂõûÊù°‰ª∂): „Éã„É≥„ÉÜ„É≥„Éâ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÈÄ£Êê∫„ÄÅ„ÇΩ„Éï„Éà„Éó„É¨„Ç§ÊôÇÈñì„ÄÅSwitch OnlineÂä†ÂÖ•Ê≠¥„Å™„Å©„ÄÇ',
                result: 'Ë©≥Á¥∞Êú™ÂÆö',
                resultDate: null,
                deadline: 'Ë©≥Á¥∞Êú™ÂÆö',
                purchaseDate: null
            },
            {
                store: '„Çª„Éñ„É≥„Éç„ÉÉ„Éà„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞',
                storeType: '„Ç≥„É≥„Éì„ÉãÁ≥ªEC Á¨¨3Âõû‰∫àÂëä',
                link: 'https://7net.omni7.jp/top',
                app: false,
                period: '6/26‰ª•Èôç„Å´ÂÆüÊñΩ‰∫àÂÆö',
                startDate: new Date('2025-06-26T15:00:00'),
                endDate: null,
                condition: 'Ë©≥Á¥∞„ÅØ6/26‰ª•Èôç„Å´ÂÖ¨Âºè„Çµ„Ç§„ÉàÁ≠â„ÅßÁô∫Ë°®‰∫àÂÆö„ÄÇÂèÇËÄÉ(ÂâçÂõûÊù°‰ª∂): ÊúüÈñì‰∏≠„ÅÆË≥ºÂÖ•Â±•Ê≠¥(1000ÂÜÜ‰ª•‰∏ä)„ÄÅ„É°„É´„Éû„Ç¨Âèó‰ø°Ë®≠ÂÆö„Å™„Å©„ÄÇ',
                result: 'Ë©≥Á¥∞Êú™ÂÆö',
                resultDate: null,
                deadline: 'Ë©≥Á¥∞Êú™ÂÆö',
                purchaseDate: null
            },
            {
                store: '„ÇΩ„Éï„Éû„ÉÉ„Éó (Web)',
                storeType: 'PC„ÉªÂÆ∂ÈõªÂ∫ó Á¨¨5Âõû',
                link: 'https://www.sofmap.com/',
                app: false,
                period: '6/19 16:00 „Äú 6/22 10:00 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-19T16:00:00'),
                endDate: new Date('2025-06-22T10:00:00'),
                condition: '„ÇΩ„Éï„Éû„ÉÉ„Éó‰ºöÂì°ÔºãEC‰ºöÂì°ÁôªÈå≤„Éª„É°„É´„Éû„Ç¨Ë≥ºË™≠ÔºãÈÅéÂéª2Âπ¥Èñì„ÅÆË≥ºÂÖ•Â±•Ê≠¥ÂøÖÈ†à„ÄÇ',
                result: '6/25 10:00‰ª•Èôç ÂΩìÈÅ∏ËÄÖ„Å∏„É°„Éº„É´',
                resultDate: new Date('2025-06-25T10:00:00'),
                deadline: 'Web:6/25„Äú6/27, Â∫óËàó:6/28„Äú7/4',
                purchaseDate: new Date('2025-07-04T23:59:00')
            },
            {
                store: '„Ç§„Ç™„É≥',
                storeType: 'Á∑èÂêà„Çπ„Éº„Éë„Éº („Ç¢„Éó„É™ÊäΩÈÅ∏)',
                link: 'https://www.kidsrepublic.jp/about/app.html',
                app: true,
                period: '6/14 „Äú 6/15 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-14T11:00:00'),
                endDate: new Date('2025-06-15T19:59:00'),
                condition: '„Ç≠„ÉÉ„Ç∫„É™„Éë„Éñ„É™„ÉÉ„ÇØ„Ç¢„Éó„É™„Åã„Çâ„ÅÆÂøúÂãü„ÄÇ1Âõû„ÅÆÂøúÂãü„Åß2ÂõûÊäΩÈÅ∏„ÄÇÊåáÂÆöÂ∫óËàó„Åß„ÅÆÂèóÂèñÂøÖÈ†à„ÄÇ',
                result: '1ÂõûÁõÆ:6/21Ê∏à, 2ÂõûÁõÆ:6/25 12ÊôÇ„Äú',
                resultDate: new Date('2025-06-25T12:00:00'),
                deadline: 'ÂΩìÈÅ∏ÈÄöÁü•„Å´Ë®òËºâ',
                purchaseDate: new Date('2025-07-01T23:59:00')
            },
            {
                store: '„Éï„Ç°„Éü„É™„Éº„Éû„Éº„Éà',
                storeType: '„Ç≥„É≥„Éì„Éã („Éï„Ç°„Éü„Éö„Ç§„Ç¢„Éó„É™)',
                link: 'https://www.family.co.jp/services/payment/famipay.html',
                app: true,
                period: '6/20 10:00 „Äú 6/22 23:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-20T10:00:00'),
                endDate: new Date('2025-06-22T23:59:00'),
                condition: '6/19ÊôÇÁÇπ„Åß„Éï„Ç°„Éü„Éö„Ç§„Ç¢„Éó„É™‰ºöÂì°„Åß„ÅÇ„Çã„Åì„Å®„ÄÇÊåáÂÆöÂ∫óËàó„Åß„ÅÆÂèóÂèñÂøÖÈ†à„ÄÇ',
                result: '6/26 12:00È†É ÂΩìÈÅ∏ËÄÖ„Å∏ÈÄöÁü•',
                resultDate: new Date('2025-06-26T12:00:00'),
                deadline: '7/4„Äú7/10',
                purchaseDate: new Date('2025-07-10T23:59:00')
            },
            {
                store: '„Ç∏„Éß„Éº„Ç∑„É≥ (Web)',
                storeType: 'ÂÆ∂ÈõªÈáèË≤©Â∫ó („É°„Éº„É´ÊãõÂæÖ)',
                link: 'https://joshinweb.jp/top.html',
                app: false,
                period: '6/13 10:00 „Äú 6/16 9:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-13T10:00:00'),
                endDate: new Date('2025-06-16T09:59:00'),
                condition: 'ÂØæË±°‰ºöÂì°„Å∏„ÅÆÂÄãÂà•„É°„Éº„É´ÊãõÂæÖ„ÅÆ„Åø„ÄÇ„Ç¥„Éº„É´„Éâ/„Éó„É©„ÉÅ„Éä/VIP‰ºöÂì°Ôºã„É°„É´„Éû„Ç¨ÁôªÈå≤„Å™„Å©„ÄÇ',
                result: '6/26 Â§ïÊñπ‰ª•Èôç Áô∫Ë°®‰∫àÂÆö',
                resultDate: new Date('2025-06-26T18:00:00'),
                deadline: 'ÂΩìÈÅ∏ÈÄöÁü•ÂæåÊ°àÂÜÖ',
                purchaseDate: null
            },
            {
                store: 'GEO',
                storeType: '„Ç®„É≥„Çø„É°Â∫ó („Ç¢„Éó„É™ÊäΩÈÅ∏)',
                link: 'https://geo-online.co.jp/html/application.html',
                app: true,
                period: '6/12 11:00 „Äú 6/17 17:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-12T11:00:00'),
                endDate: new Date('2025-06-17T17:59:00'),
                condition: 'GEO„Ç¢„Éó„É™„Åã„ÇâÂøúÂãü„ÄÇPonta„Ç´„Éº„ÉâÈÄ£Êê∫ÂøÖÈ†à„ÄÇÊú™ÂΩìÈÅ∏ËÄÖÂÑ™ÂÖà„Ç∑„Çπ„ÉÜ„É†„ÅÇ„Çä„ÄÇ',
                result: '1ÂõûÁõÆ: 6/20Ê∏à, 2ÂõûÁõÆ: 6/27 ‰∫àÂÆö',
                resultDate: new Date('2025-06-27T12:00:00'),
                deadline: '2ÂõûÁõÆ: 6/28„Äú7/1',
                purchaseDate: new Date('2025-07-01T23:59:00')
            },
            {
                store: '„ÅäÂÆùÂâµÂ∫´',
                storeType: '‰∏≠Âè§ÂìÅÂ∫ó („Ç¢„Éó„É™ÊäΩÈÅ∏)',
                link: 'https://www.otakarasouko.com/g-lottery/',
                app: true,
                period: '6/16 12:00 „Äú 6/23 23:45 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-16T12:00:00'),
                endDate: new Date('2025-06-23T23:45:00'),
                condition: '„ÅäÂÆùÂâµÂ∫´„Ç¢„Éó„É™‰ºöÂì°ÈôêÂÆö„ÄÇ„Ç¢„Éó„É™ÂÜÖÊäΩÈÅ∏„Éö„Éº„Ç∏„Åã„ÇâÂøúÂãü„ÄÇË≥ºÂÖ•Â±•Ê≠¥‰∏çË¶Å„ÄÇ',
                result: '6/27 12:00È†É „Ç¢„Éó„É™„ÅßÈÄöÁü•',
                resultDate: new Date('2025-06-27T12:00:00'),
                deadline: '7/4 „Äú 7/6',
                purchaseDate: new Date('2025-07-06T23:59:00')
            },
            {
                store: 'Ê•ΩÂ§©„Éñ„ÉÉ„ÇØ„Çπ',
                storeType: 'ECÂ§ßÊâã Á¨¨4Âõû',
                link: 'https://books.rakuten.co.jp/event/game/selling/',
                app: false,
                period: '6/18 10:00 „Äú 6/19 23:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-18T10:00:00'),
                endDate: new Date('2025-06-19T23:59:00'),
                condition: 'Ê•ΩÂ§©‰ºöÂì°ÔºãÈÅéÂéª1Âπ¥Èñì„ÅÆÊ•ΩÂ§©„Éñ„ÉÉ„ÇØ„ÇπË≥ºÂÖ•Â±•Ê≠¥ÂøÖÈ†àÔºàÈõªÂ≠êÊõ∏Á±çÁ≠âÈô§„ÅèÔºâ„ÄÇ',
                result: '6/27 È†É ÂΩìÈÅ∏ËÄÖ„Å∏„É°„Éº„É´ÈÄöÁü•',
                resultDate: new Date('2025-06-27T12:00:00'),
                deadline: 'ÂΩìÈÅ∏ÈÄöÁü•ÂæåÊ°àÂÜÖ',
                purchaseDate: null
            },
            {
                store: '„Éâ„É≥„Éª„Ç≠„Éõ„Éº„ÉÜ',
                storeType: '„Éá„Ç£„Çπ„Ç´„Ç¶„É≥„ÉàÂ∫ó (majica„Ç¢„Éó„É™)',
                link: 'https://www.majica-net.com/app/',
                app: true,
                period: '6/12 10:00 „Äú 6/19 23:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-12T10:00:00'),
                endDate: new Date('2025-06-19T23:59:00'),
                condition: 'majica„Ç¢„Éó„É™„Åã„ÇâÂøúÂãü„ÄÇ‰ºöÂì°ÈôêÂÆö„ÄÇÊåáÂÆöÂ∫óËàó„Åß„ÅÆÂèóÂèñÂøÖÈ†à„ÄÇ',
                result: '6/27 È†É „Ç¢„Éó„É™„ÅßÈÄöÁü•',
                resultDate: new Date('2025-06-27T12:00:00'),
                deadline: 'ÂΩìÈÅ∏ÈÄöÁü•ÂæåÊ°àÂÜÖ',
                purchaseDate: null
            },
            {
                store: 'MrMax',
                storeType: '„Éá„Ç£„Çπ„Ç´„Ç¶„É≥„ÉàÂ∫ó („Ç¢„Éó„É™ÊäΩÈÅ∏)',
                link: 'https://www.mrmax.co.jp/app/',
                app: true,
                period: '6/21 12:00 „Äú 6/23 23:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-21T12:00:00'),
                endDate: new Date('2025-06-23T23:59:00'),
                condition: 'MrMax„Ç¢„Éó„É™„Åã„ÇâÂøúÂãü„ÄÇÊúüÈñì‰∏≠„ÅÆË≥ºÂÖ•Â±•Ê≠¥‰∏çË¶Å„ÄÇÂ∫óËàóÂèóÂèñÂøÖÈ†à„ÄÇ',
                result: '6/27 15:00È†É „Ç¢„Éó„É™„ÅßÈÄöÁü•',
                resultDate: new Date('2025-06-27T15:00:00'),
                deadline: '6/28 „Äú 6/30',
                purchaseDate: new Date('2025-06-30T23:59:00')
            },
            {
                store: '„É§„Éû„ÉÄ„Éá„É≥„Ç≠',
                storeType: 'ÂÆ∂ÈõªÈáèË≤©Â∫ó („Ç¢„Éó„É™ÊäΩÈÅ∏)',
                link: 'https://www.yamada-denki.jp/service/application/',
                app: true,
                period: '5/30 „Äú 6/1 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-05-30T10:00:00'),
                endDate: new Date('2025-06-01T23:59:00'),
                condition: '„É§„Éû„ÉÄ„Éá„Ç∏„Çø„É´‰ºöÂì°„Ç¢„Éó„É™„Åã„ÇâÂøúÂãü„ÄÇÊúüÈñì‰∏≠„ÅÆË≥ºÂÖ•ÂÆüÁ∏æ„ÄÇ1Âõû„ÅÆÂøúÂãü„Åß3ÂõûÊäΩÈÅ∏„ÉÅ„É£„É≥„Çπ„ÄÇ',
                result: 'Á¨¨1,2Âõû: Áô∫Ë°®Ê∏à„ÄÅÁ¨¨3Âõû: 6/27 ‰∫àÂÆö',
                resultDate: new Date('2025-06-27T18:00:00'),
                deadline: 'ÂêÑÂõûÁô∫Ë°®Âæå3Êó•Èñì',
                purchaseDate: new Date('2025-06-30T23:59:00')
            },
            {
                store: '„Ç®„Éá„Ç£„Ç™„É≥',
                storeType: 'ÂÆ∂ÈõªÈáèË≤©Â∫ó Á¨¨3Âõû',
                link: 'https://www.edion.com/app/release/lottery.html',
                app: true,
                period: '6/12 10:00 „Äú 6/15 23:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-12T10:00:00'),
                endDate: new Date('2025-06-15T23:59:00'),
                condition: '„Ç®„Éá„Ç£„Ç™„É≥„ÅÆÂêÑÁ®Æ‰ºöÂì°(„Ç¢„Éó„É™/ID/„Ç´„Éº„Éâ)„ÅÑ„Åö„Çå„Åã„ÅßÂøúÂãüÂèØËÉΩ„ÄÇ',
                result: '„Éç„ÉÉ„Éà: 6/24Ê∏à, Â∫óËàó: 6/27 ‰∫àÂÆö',
                resultDate: new Date('2025-06-27T12:00:00'),
                deadline: 'ÂΩìÈÅ∏ÈÄöÁü•ÂæåÊ°àÂÜÖ',
                purchaseDate: null
            },
            {
                store: '„Ç∏„Éß„Éº„Ç∑„É≥ („Ç¢„Éó„É™)',
                storeType: 'ÂÆ∂ÈõªÈáèË≤©Â∫ó Á¨¨5Âõû',
                link: 'https://joshinweb.jp/app.html',
                app: true,
                period: '6/20 0:00 „Äú 6/22 23:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-20T00:00:00'),
                endDate: new Date('2025-06-22T23:59:00'),
                condition: 'VIP/„Éó„É©„ÉÅ„Éä/„Ç¥„Éº„É´„Éâ„Çπ„Éû„Ç§„É´‰ºöÂì°ÈôêÂÆö„ÄÇ„Ç∏„Éß„Éº„Ç∑„É≥„Ç¢„Éó„É™„Åã„ÇâÂøúÂãü„ÄÇ',
                result: '7/4 15:00È†É Áô∫Ë°®‰∫àÂÆö',
                resultDate: new Date('2025-07-04T15:00:00'),
                deadline: '7/5„Äú7/8',
                purchaseDate: new Date('2025-07-08T23:59:00')
            },
            {
                store: 'LOHACO by ASKUL',
                storeType: 'Yahoo!„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞Á≥ªEC',
                link: 'https://lohaco.yahoo.co.jp/',
                app: false,
                period: '6/10 12:00 „Äú 6/17 11:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-10T12:00:00'),
                endDate: new Date('2025-06-17T11:59:00'),
                condition: 'ÈÅéÂéª1Âπ¥Èñì„ÅÆYahoo!„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞Ë≥ºÂÖ•Â±•Ê≠¥ÂøÖÈ†à„ÄÇËª¢Â£≤ÂØæÁ≠ñÊù°‰ª∂„ÅÇ„Çä„ÄÇ',
                result: '6/24 12:00‰ª•Èôç Áô∫Ë°®Ê∏à„Åø',
                resultDate: new Date('2025-06-24T12:00:00'),
                deadline: '6/30 23:59„Åæ„Åß',
                purchaseDate: new Date('2025-06-30T23:59:00')
            },
            {
                store: '„Éì„ÉÉ„ÇØ„Ç´„É°„É©',
                storeType: 'ÂÆ∂ÈõªÈáèË≤©Â∫ó',
                link: 'https://www.biccamera.com/bc/c/sale/special/lottery/switch_order.html',
                app: false,
                period: 'Áõ¥Ëøë„ÅÆÊäΩÈÅ∏„ÅØÁµÇ‰∫Ü',
                startDate: new Date('2025-06-13T10:00:00'),
                endDate: new Date('2025-06-15T23:59:00'),
                condition: 'ÂâçÂõûÊù°‰ª∂: „Ç¢„Éó„É™‰ºöÂì°ÔºãÈÅéÂéª„ÅÆË≥ºÂÖ•Â±•Ê≠¥„Å™„Å©„ÄÇÊ¨°ÂõûÈñãÂÇ¨„ÅØÂÖ¨Âºè„Çµ„Ç§„Éà„Éª„Ç¢„Éó„É™„ÅßÁ¢∫Ë™ç„ÄÇ',
                result: '6/20Áô∫Ë°®Ê∏à„Åø',
                resultDate: new Date('2025-06-20T10:00:00'),
                deadline: 'Ë≥ºÂÖ•ÊúüÈñìÁµÇ‰∫Ü',
                purchaseDate: new Date('2025-06-23T21:00:00')
            },
            {
                store: '„É®„Éâ„Éê„Ç∑„Ç´„É°„É©',
                storeType: 'ÂÆ∂ÈõªÈáèË≤©Â∫ó',
                link: 'https://www.yodobashi.com/',
                app: false,
                period: 'Áõ¥Ëøë„ÅÆÊäΩÈÅ∏„ÅØÁµÇ‰∫Ü',
                startDate: new Date('2025-06-06T07:00:00'),
                endDate: new Date('2025-06-09T10:59:00'),
                condition: 'ÂâçÂõûÊù°‰ª∂: „É®„Éâ„Éê„Ç∑‰ºöÂì°ÔºãÈÅéÂéª„ÅÆË≥ºÂÖ•Â±•Ê≠¥„Å™„Å©„ÄÇÊ¨°ÂõûÈñãÂÇ¨„ÅØÂÖ¨Âºè„Çµ„Ç§„Éà„Éª„Ç¢„Éó„É™„ÅßÁ¢∫Ë™ç„ÄÇ',
                result: '6/11 Áô∫Ë°®Ê∏à„Åø',
                resultDate: new Date('2025-06-11T09:00:00'),
                deadline: 'Ë≥ºÂÖ•ÊúüÈñìÁµÇ‰∫Ü',
                purchaseDate: new Date('2025-06-17T23:59:00')
            },
            {
                store: 'TSUTAYA',
                storeType: '„Ç®„É≥„Çø„É°Â∫ó („Ç¢„Éó„É™ÊäΩÈÅ∏)',
                link: 'https://tsutaya.tsite.jp/info/game/20250523/index.html',
                app: true,
                period: 'Áõ¥Ëøë„ÅÆÊäΩÈÅ∏„ÅØÁµÇ‰∫Ü',
                startDate: null,
                endDate: null,
                condition: 'ÂâçÂõûÊù°‰ª∂: TSUTAYA„Ç¢„Éó„É™„Åã„Çâ„ÅÆÂøúÂãü„ÄÇÊ¨°ÂõûÈñãÂÇ¨„ÅØÂÖ¨Âºè„Çµ„Ç§„Éà„Éª„Ç¢„Éó„É™„ÅßÁ¢∫Ë™ç„ÄÇ',
                result: '„Éº',
                resultDate: null,
                deadline: '„Éº',
                purchaseDate: null
            }
        ];

        let currentSortMode = 'priority';
        let currentSortDirection = 'asc';
        let currentFilter = 'all';

        const searchInput = document.getElementById('searchInput');
        const tableBody = document.getElementById('tableBody');
        const noResults = document.getElementById('noResults');

        searchInput.addEventListener('input', function() {
            applyFiltersAndSort();
        });

        function filterRows(status) {
            currentFilter = status;
            const buttons = document.querySelectorAll('.filter-btn');

            buttons.forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[onclick="filterRows('${status}')"]`).classList.add('active');


            applyFiltersAndSort();
        }

        function sortByColumn(column) {
            if (currentSortMode === column) {
                currentSortDirection = currentSortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                currentSortMode = column;
                currentSortDirection = 'asc';
            }

            updateSortHeaders();
            applyFiltersAndSort();
        }

        function updateSortHeaders() {
            const headers = document.querySelectorAll('th.sortable');
            headers.forEach(header => {
                header.classList.remove('sort-asc', 'sort-desc');
                if (header.dataset.sort === currentSortMode) {
                    header.classList.add(currentSortDirection === 'asc' ? 'sort-asc' : 'sort-desc');
                }
            });
        }

        window.filterRows = filterRows;
        window.sortByColumn = sortByColumn;

        function applyFiltersAndSort() {
            const searchTerm = searchInput.value.toLowerCase();
            let processedData = storeData.map(item => ({...item, status: calculateStatus(item) }));
            
            let filteredData = processedData.filter(item => {
                const matchesSearch = item.store.toLowerCase().includes(searchTerm);
                const matchesFilter = currentFilter === 'all' || item.status === currentFilter;
                return matchesSearch && matchesFilter;
            });
            
            filteredData.sort((a, b) => {
                 if (currentSortMode === 'priority') {
                    const statusPriority = { 'active': 1, 'purchase': 2, 'upcoming': 3, 'waiting': 4, 'ended': 5 };
                    const priorityA = statusPriority[a.status] || 6;
                    const priorityB = statusPriority[b.status] || 6;

                    if (priorityA !== priorityB) return priorityA - priorityB;

                    let dateA, dateB;
                    if (a.status === 'active' || a.status === 'upcoming') {
                         dateA = a.endDate || a.startDate;
                         dateB = b.endDate || b.startDate;
                    } else { // waiting, purchase, ended
                        dateA = a.resultDate || a.purchaseDate;
                        dateB = b.resultDate || b.purchaseDate;
                    }

                    if (!dateA && !dateB) return 0;
                    if (!dateA) return 1;
                    if (!dateB) return -1;
                    
                    return dateA.getTime() - dateB.getTime();
                } else {
                    let valA, valB;
                    if (currentSortMode === 'deadline') {
                        valA = a.endDate || a.startDate;
                        valB = b.endDate || b.startDate;
                    } else if (currentSortMode === 'result') {
                        valA = a.resultDate;
                        valB = b.resultDate;
                    } else if (currentSortMode === 'purchase') {
                        valA = a.purchaseDate;
                        valB = b.purchaseDate;
                    }

                    if (valA === null || valA === undefined) valA = currentSortDirection === 'asc' ? new Date('2999-12-31') : new Date('1970-01-01');
                    if (valB === null || valB === undefined) valB = currentSortDirection === 'asc' ? new Date('2999-12-31') : new Date('1970-01-01');

                    if (currentSortDirection === 'asc') {
                        return valA.getTime() - valB.getTime();
                    } else {
                        return valB.getTime() - valA.getTime();
                    }
                }
            });

            renderTable(filteredData);
            updateStats(processedData);
        }

        function renderTable(data) {
            let html = '';
            let currentSection = '';

            data.forEach(item => {
                let sectionTitle = '';
                switch (item.status) {
                    case 'active': sectionTitle = 'üî• ÂøúÂãüÂèó‰ªò‰∏≠'; break;
                    case 'purchase': sectionTitle = 'üí∞ Ë≥ºÂÖ•ÊúüÈñì'; break;
                    case 'upcoming': sectionTitle = 'üìÖ ÈñãÂßã‰∫àÂÆö'; break;
                    case 'waiting': sectionTitle = '‚è≥ ÁµêÊûúÁô∫Ë°®ÂæÖ„Å°'; break;
                    case 'ended': sectionTitle = '‚úÖ ÁµÇ‰∫ÜÊ∏à„Åø'; break;
                    default: sectionTitle = 'üì¢ „Åù„ÅÆ‰ªñ';
                }

                if (sectionTitle !== currentSection) {
                    currentSection = sectionTitle;
                    html += `<tr class="section-header"><td colspan="7"><strong>${sectionTitle}</strong></td></tr>`;
                }
                
                let urgencyClass = '';
                if (isEndingToday(item) && item.status === 'active') {
                    urgencyClass = 'last-chance';
                } else if (item.status === 'purchase') {
                     const now = new Date('2025-06-25T09:30:00');
                     if(item.purchaseDate) {
                         const timeDiff = item.purchaseDate.getTime() - now.getTime();
                         const hoursDiff = timeDiff / (1000 * 60 * 60);
                         if (hoursDiff > 0 && hoursDiff <= 24) {
                             urgencyClass = 'today-ending';
                         }
                     }
                }

                const showNewBadge = item.startDate && (new Date('2025-06-25T09:30:00') - new Date(item.startDate)) < 3 * 24 * 60 * 60 * 1000;
                
                const appIconSvg = `
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M11 2a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3zM5 1a4 4 0 0 0-4 4v6a4 4 0 0 0 4 4h6a4 4 0 0 0 4-4V5a4 4 0 0 0-4-4z"/>
                      <path d="M11.5 5.5a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2a.5.5 0 0 1 .5-.5m-3 0a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-1 0v-5a.5.5 0 0 1 .5-.5m-3 0a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-1 0v-5a.5.5 0 0 1 .5-.5"/>
                    </svg>
                    <span>„Ç¢„Éó„É™ÂøúÂãü</span>`;
                
                const linkButton = item.app 
                    ? `<a href="${item.link}" target="_blank" class="app-icon">${appIconSvg}</a>`
                    : `<a href="${item.link}" target="_blank" class="link-btn">${getButtonText(item.status)}</a>`;

                html += `
                    <tr data-status="${item.status}" class="${urgencyClass}" data-store="${item.store}">
                        <td>
                            <div class="store-name">
                                ${item.store}
                                ${showNewBadge ? '<span class="new-badge">NEW</span>' : ''}
                            </div>
                            <div class="store-type">${item.storeType}</div>
                        </td>
                        <td><span class="status status-${item.status}">${getStatusText(item.status)}</span></td>
                        <td>${linkButton}</td>
                        <td><div class="period">${item.period}</div></td>
                        <td><div class="condition">${item.condition}</div></td>
                        <td><div class="result">${item.result}</div></td>
                        <td><div class="deadline">${item.deadline}</div></td>
                    </tr>`;
            });

            tableBody.innerHTML = html;
            noResults.classList.toggle('hidden', data.length > 0);
        }

        function getStatusText(status) {
            const statusMap = { 'active': 'Âèó‰ªò‰∏≠', 'upcoming': 'ÈñãÂßã‰∫àÂÆö', 'waiting': 'Áô∫Ë°®ÂæÖ„Å°', 'purchase': 'Ë≥ºÂÖ•ÊúüÈñì', 'ended': 'ÁµÇ‰∫ÜÊ∏à„Åø' };
            return statusMap[status] || status;
        }

        function getButtonText(status) {
            const buttonMap = { 'active': 'ÂøúÂãü„É™„É≥„ÇØ', 'upcoming': 'Á¢∫Ë™ç„Çµ„Ç§„Éà', 'waiting': 'ÁµêÊûúÁ¢∫Ë™ç', 'purchase': 'Ë≥ºÂÖ•„Çµ„Ç§„Éà', 'ended': 'ÂÖ¨Âºè„Çµ„Ç§„Éà' };
            return buttonMap[status] || 'ÂÖ¨Âºè„Çµ„Ç§„Éà';
        }

        function updateStats(data) {
            const stats = { active: 0, upcoming: 0, waiting: 0, purchase: 0 };
            data.forEach(item => {
                if (stats.hasOwnProperty(item.status)) {
                    stats[item.status]++;
                }
            });

            Object.keys(stats).forEach(key => {
                const element = document.getElementById(`stat-${key}`);
                if (element) {
                    element.textContent = stats[key];
                }
            });
        }

        // ÂàùÊúüË°®Á§∫
        document.addEventListener('DOMContentLoaded', () => {
            updateSortHeaders();
            applyFiltersAndSort();
        });

    </script>
</body>

</html>
