<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊäΩÈÅ∏ÂøúÂãü„Ç®„Éº„Ç∏„Çß„É≥„Éà | Nintendo Switch 2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Hiragino Sans', 'Yu Gothic UI', sans-serif;
            background: linear-gradient(135deg, #fafafa 0%, #f0f2f5 100%);
            color: #333;
            line-height: 1.5;
            padding: 20px 2px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="0.5" fill="rgba(74,85,104,0.03)"/><circle cx="80" cy="20" r="0.3" fill="rgba(74,85,104,0.03)"/><circle cx="50" cy="50" r="0.4" fill="rgba(74,85,104,0.03)"/><circle cx="30" cy="80" r="0.3" fill="rgba(74,85,104,0.03)"/><circle cx="70" cy="70" r="0.5" fill="rgba(74,85,104,0.03)"/></svg>');
            animation: float 30s infinite linear;
            z-index: 0;
            pointer-events: none;
        }

        @keyframes float {
            0% {
                transform: translateX(-50px) translateY(-50px);
            }

            100% {
                transform: translateX(50px) translateY(50px);
            }
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
            overflow: hidden;
            position: relative;
            z-index: 1;
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
            color: white;
            padding: 24px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% {
                left: -100%;
            }

            100% {
                left: 100%;
            }
        }

        h1 {
            font-size: 1.9rem;
            font-weight: 600;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .subtitle {
            font-size: 0.95rem;
            opacity: 0.95;
            margin-bottom: 4px;
            position: relative;
            z-index: 1;
        }

        .update-note {
            font-size: 0.85rem;
            opacity: 0.85;
            background: rgba(255, 255, 255, 0.15);
            padding: 8px 16px;
            border-radius: 4px;
            display: inline-block;
            margin-top: 8px;
            position: relative;
            z-index: 1;
        }

        .search-section {
            padding: 16px 24px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .search-box {
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: center;
        }

        .search-input {
            padding: 8px 16px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 0.9rem;
            width: 300px;
            transition: all 0.3s ease;
            background: white;
        }

        .search-input:focus {
            outline: none;
            border-color: #495057;
            box-shadow: 0 0 0 2px rgba(73, 80, 87, 0.1);
        }

        .filter-section {
            padding: 16px 24px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .filter-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            align-items: center;
            justify-content: center;
        }

        .filter-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid #dee2e6;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            color: #495057;
            position: relative;
            overflow: hidden;
        }

        .filter-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(73, 80, 87, 0.1), transparent);
            transition: left 0.4s;
        }

        .filter-btn:hover::before {
            left: 100%;
        }

        .filter-btn.active {
            background: #495057;
            color: white;
            border-color: #495057;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(73, 80, 87, 0.2);
        }

        .filter-btn:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .filter-btn.active:hover {
            background: #495057;
        }

        .table-container {
            overflow-x: auto;
            padding: 0;
            position: relative;
        }

        .scroll-indicator-top,
        .scroll-indicator-bottom {
            display: none;
            height: 8px;
            background: linear-gradient(90deg, #dee2e6, #6c757d, #dee2e6);
            border-radius: 4px;
            margin: 0 10px;
            opacity: 0.7;
        }

        .scroll-indicator-top {
            margin-bottom: 5px;
        }

        .scroll-indicator-bottom {
            margin-top: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            border-spacing: 0;
        }

        th {
            background: #f8f9fa;
            color: #495057;
            padding: 16px 10px;
            font-weight: 600;
            text-align: left;
            border-bottom: 2px solid #dee2e6;
            white-space: nowrap;
            vertical-align: middle;
            position: relative;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
        }

        th:hover {
            background: #e9ecef;
        }

        th.sortable::after {
            content: ' ‚áÖ';
            color: #6c757d;
            font-size: 0.8em;
            margin-left: 4px;
        }

        th.sort-asc::after {
            content: ' ‚Üë';
            color: #495057;
            font-weight: bold;
        }

        th.sort-desc::after {
            content: ' ‚Üì';
            color: #495057;
            font-weight: bold;
        }

        th::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: #495057;
            transition: width 0.3s ease;
        }

        th:hover::before {
            width: 100%;
        }

        td {
            padding: 12px 10px !important;
            border-bottom: 1px solid #f1f3f4;
            vertical-align: middle;
            text-align: left;
            transition: all 0.2s ease;
        }

        td:nth-child(3),
        td:nth-child(4) {
            white-space: nowrap;
        }

        tr:hover {
            background: #f8f9fa;
            transform: scale(1.001);
        }

        .urgent {
            background: linear-gradient(90deg, #fff5f5, #ffffff);
            border-left: 3px solid #dc3545;
            animation: urgentPulse 2s infinite;
        }

        @keyframes urgentPulse {

            0%,
            100% {
                border-left-color: #dc3545;
            }

            50% {
                border-left-color: #ff6b7a;
            }
        }

        .today-ending {
            background: linear-gradient(90deg, #fff3cd, #ffffff);
            border-left: 3px solid #ffc107;
        }

        .very-urgent {
            background: linear-gradient(90deg, #ffe6e6, #ffffff);
            border-left: 3px solid #ff0000;
            animation: veryUrgentPulse 1s infinite;
        }

        @keyframes veryUrgentPulse {

            0%,
            100% {
                border-left-color: #ff0000;
                box-shadow: inset 0 0 5px rgba(255, 0, 0, 0.1);
            }

            50% {
                border-left-color: #ff4444;
                box-shadow: inset 0 0 10px rgba(255, 0, 0, 0.2);
            }
        }

        .store-name {
            font-weight: 600;
            color: #2d3748;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .store-type {
            font-size: 11px;
            color: #6c757d;
            margin-top: 2px;
        }

        .new-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(45deg, #ff4757, #ff6b7a);
            color: white;
            font-size: 9px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 6px rgba(255, 71, 87, 0.3);
            animation: newBadgePulse 2s infinite ease-in-out;
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .new-badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: newBadgeShine 3s infinite;
        }

        @keyframes newBadgePulse {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 2px 6px rgba(255, 71, 87, 0.3);
            }

            50% {
                transform: scale(1.05);
                box-shadow: 0 3px 12px rgba(255, 71, 87, 0.5);
            }
        }

        @keyframes newBadgeShine {
            0% {
                left: -100%;
            }

            100% {
                left: 100%;
            }
        }

        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 500;
            text-align: center;
            min-width: 65px;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            animation: glow 2s infinite;
        }

        @keyframes glow {

            0%,
            100% {
                box-shadow: 0 0 5px rgba(21, 87, 36, 0.3);
            }

            50% {
                box-shadow: 0 0 20px rgba(21, 87, 36, 0.6);
            }
        }

        .status-upcoming {
            background: #e6f7ff;
            color: #0050b3;
            border: 1px solid #91d5ff;
        }

        .status-ended {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f1b0b7;
        }

        .status-waiting {
            background: #fffbe6;
            color: #ad8b00;
            border: 1px solid #fff1b8;
        }

        .status-purchase {
            background: #e1f5fe;
            color: #01579b;
            border: 1px solid #b3e5fc;
        }

        .model {
            background: #e9ecef;
            color: #495057;
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 11px;
            display: inline-block;
            margin: 1px;
            transition: all 0.2s ease;
        }

        .model:hover {
            background: #dee2e6;
            transform: scale(1.05);
        }

        .period {
            font-weight: 500;
            color: #495057;
            font-size: 12px;
        }

        .condition {
            font-size: 12px;
            color: #6c757d;
            line-height: 1.4;
        }

        .result,
        .deadline {
            font-size: 12px;
            color: #495057;
        }

        .link-btn {
            background: #495057;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            text-decoration: none;
            font-size: 11px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-block;
            position: relative;
            overflow: hidden;
        }

        .link-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.4s;
        }

        .link-btn:hover::before {
            left: 100%;
        }

        .link-btn:hover {
            background: #343a40;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 58, 64, 0.3);
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 32px;
            padding: 16px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            font-size: 14px;
        }

        .stat-item {
            text-align: center;
            transition: transform 0.2s ease;
        }

        .stat-item:hover {
            transform: translateY(-2px);
        }

        .stat-number {
            font-size: 18px;
            font-weight: 600;
            color: #495057;
        }

        .stat-label {
            color: #6c757d;
            font-size: 12px;
            margin-top: 2px;
        }

        .section-header {
            background: #e9ecef;
            padding: 8px 16px;
            font-weight: 600;
            color: #495057;
            font-size: 13px;
            border-top: 2px solid #dee2e6;
        }

        .section-header td {
            border-bottom: 1px solid #dee2e6;
        }

        .countdown {
            font-size: 10px;
            color: #dc3545;
            font-weight: 600;
            margin-top: 2px;
        }

        .countdown.very-urgent {
            color: #ff0000;
            animation: countdownBlink 1s infinite;
        }

        @keyframes countdownBlink {

            0%,
            50% {
                opacity: 1;
            }

            51%,
            100% {
                opacity: 0.5;
            }
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #6c757d;
            font-size: 1rem;
        }

        @media (max-width: 1200px) {
            .condition {
                font-size: 10px;
            }

            .search-input {
                width: 250px;
            }

            .filter-controls {
                flex-direction: column;
                gap: 12px;
            }
        }

        @media (max-width: 768px) {
            .container {
                margin: 0 2px;
            }

            .header {
                padding: 16px;
            }

            h1 {
                font-size: 1.4rem;
            }

            th,
            td {
                padding: 8px 6px;
                font-size: 11px;
            }

            .filter-section,
            .search-section {
                padding: 12px 16px;
            }

            .search-input {
                width: 200px;
                font-size: 0.85rem;
            }

            .stats {
                gap: 20px;
                padding: 12px;
            }

            .condition {
                font-size: 9px;
            }

            .scroll-indicator-top,
            .scroll-indicator-bottom {
                display: block;
                animation: scrollHint 2s infinite ease-in-out;
            }

            .filter-controls {
                flex-direction: column;
                gap: 8px;
            }

            .new-badge {
                font-size: 8px;
                padding: 1px 4px;
            }

            .store-name {
                font-size: 12px;
                flex-wrap: wrap;
                gap: 4px;
            }
        }

        @keyframes scrollHint {

            0%,
            100% {
                opacity: 0.4;
                transform: scaleX(1);
            }

            50% {
                opacity: 0.8;
                transform: scaleX(1.1);
            }
        }

        .hidden {
            display: none;
        }

        .last-chance {
            background: linear-gradient(90deg, #ff6b6b20, #ffffff);
            border-left: 4px solid #ff6b6b;
            position: relative;
        }

        .last-chance::before {
            content: 'Êú¨Êó•Á∑†Âàá';
            position: absolute;
            top: 5px;
            right: 10px;
            background: #ff6b6b;
            color: white;
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ÊäΩÈÅ∏ÂøúÂãü„Ç®„Éº„Ç∏„Çß„É≥„Éà | Nintendo Switch 2 ÂÆåÂÖ®ÊîªÁï•</h1>
            <div class="subtitle">ÂÖ®ÂõΩ„ÅÆÊäΩÈÅ∏ÊÉÖÂ†±„ÇíÁ∂≤ÁæÖ„ÉªÂàÜÊûê„Åô„ÇãÂ∞ÇÈñÄ„Ç®„Éº„Ç∏„Çß„É≥„Éà | 2025Âπ¥6Êúà24Êó•ÁèæÂú®ÔºàÊúÄÊñ∞ÊÉÖÂ†±ÂèçÊò†ÁâàÔºâ</div>
            <div class="update-note">„ÄêÁô∫Ë°®ÂæÖ„Å°„Äë‰ªäÈÄ±„ÅØGEO„Éª„ÇΩ„Éï„Éû„ÉÉ„Éó„Éª„Éï„Ç°„Éü„Éû„ÉªÊ•ΩÂ§©„Éª„É§„Éû„ÉÄ„Å™„Å©Áô∫Ë°®Â§öÊï∞ÔºÅ | „ÄêÊ¨°Âõû‰∫àÂëä„Äë„Éã„É≥„ÉÜ„É≥„Éâ„Éº„Çπ„Éà„Ç¢(7Êúà‰∏äÊó¨)„Éª„Çª„Éñ„É≥„Éç„ÉÉ„Éà(6/26‰ª•Èôç)</div>
        </div>

        <div class="search-section">
            <div class="search-box">
                <input type="text" class="search-input" placeholder="Â∫óËàóÂêç„ÅßÊ§úÁ¥¢..." id="searchInput">
            </div>
        </div>

        <div class="filter-section">
            <div class="filter-controls">
                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterRows('all')">„Åô„Åπ„Å¶Ë°®Á§∫</button>
                    <button class="filter-btn" onclick="filterRows('active')">ÂøúÂãüÂèó‰ªò‰∏≠</button>
                    <button class="filter-btn" onclick="filterRows('upcoming')">ÈñãÂßã‰∫àÂÆö</button>
                    <button class="filter-btn" onclick="filterRows('waiting')">ÁµêÊûúÁô∫Ë°®ÂæÖ„Å°</button>
                    <button class="filter-btn" onclick="filterRows('purchase')">Ë≥ºÂÖ•ÊúüÈñì</button>
                </div>
            </div>
        </div>

        <div class="table-container">
            <div class="scroll-indicator-top"></div>
            <table>
                <thead>
                    <tr>
                        <th>Â∫óËàóÂêç</th>
                        <th>„Çπ„ÉÜ„Éº„Çø„Çπ</th>
                        <th>ÂøúÂãü</th>
                        <th class="sortable" onclick="sortByColumn('deadline')" data-sort="deadline">Âèó‰ªòÊúüÈñì</th>
                        <th>ÂøúÂãüÊù°‰ª∂</th>
                        <th class="sortable" onclick="sortByColumn('result')" data-sort="result">ÁµêÊûúÁô∫Ë°®</th>
                        <th class="sortable" onclick="sortByColumn('purchase')" data-sort="purchase">Ë≥ºÂÖ•ÊúüÈôê</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
            <div class="scroll-indicator-bottom"></div>
            <div id="noResults" class="no-results hidden">
                Ê§úÁ¥¢Êù°‰ª∂„Å´‰∏ÄËá¥„Åô„ÇãÂ∫óËàó„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ
            </div>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="stat-active">0</div>
                <div class="stat-label">ÂøúÂãüÂèó‰ªò‰∏≠</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="stat-upcoming">0</div>
                <div class="stat-label">ÈñãÂßã‰∫àÂÆö</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="stat-waiting">0</div>
                <div class="stat-label">ÁµêÊûúÁô∫Ë°®ÂæÖ„Å°</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="stat-purchase">0</div>
                <div class="stat-label">Ë≥ºÂÖ•ÊúüÈñì</div>
            </div>
        </div>

    </div>

    <script>
        const TODAY = new Date('2025-06-24');

        function calculateStatus(item) {
            const now = new Date('2025-06-24T10:00:00');

            if (item.isOngoing && (!item.endDate || now <= item.endDate)) {
                return 'active';
            }

            if (item.resultDate && item.purchaseDate && now >= item.resultDate && now <= item.purchaseDate) {
                return 'purchase';
            }

            if (item.endDate && item.resultDate && now > item.endDate && now < item.resultDate) {
                return 'waiting';
            }

            if (item.startDate && item.endDate) {
                if (now >= item.startDate && now <= item.endDate) {
                    return 'active';
                }
                if (now < item.startDate) {
                    return 'upcoming';
                }
            }

            return 'ended';
        }

        function isStartedToday(item) {
            if (!item.startDate) return false;

            const startDate = new Date(item.startDate);
            const today = new Date(TODAY);

            return startDate.getFullYear() === today.getFullYear() &&
                startDate.getMonth() === today.getMonth() &&
                startDate.getDate() === today.getDate();
        }

        function isEndingToday(item) {
            if (!item.endDate) return false;

            const endDate = new Date(item.endDate);
            const today = new Date(TODAY);

            return endDate.getFullYear() === today.getFullYear() &&
                endDate.getMonth() === today.getMonth() &&
                endDate.getDate() === today.getDate();
        }

        const storeData = [{
                store: 'Amazon',
                storeType: 'ECÂ§ßÊâã ÊãõÂæÖÂà∂Á∂ôÁ∂ö‰∏≠',
                link: 'https://www.amazon.co.jp/dp/B0DX1BC3R8',
                period: '4/24„ÄúÔºàÊãõÂæÖÂà∂Ôºâ',
                startDate: new Date('2025-04-24T10:00:00'),
                endDate: null,
                isOngoing: true,
                condition: 'Amazon„Ç¢„Ç´„Ç¶„É≥„ÉàÂøÖÈ†à„ÄÇÂïÜÂìÅ„Éö„Éº„Ç∏„ÅÆ„ÄåÊãõÂæÖ„Çí„É™„ÇØ„Ç®„Çπ„Éà„Äç„Éú„Çø„É≥„Åã„ÇâÁî≥Ëæº„ÄÇÁâπÂà•„Å™Ë≥ºÂÖ•Â±•Ê≠¥Á≠â„ÅÆÊù°‰ª∂„Å™„Åó„ÄÇ„É™„ÇØ„Ç®„Çπ„Éà„ÅØ3„É∂ÊúàÈñìÊúâÂäπ„ÄÇ',
                result: 'ÈöèÊôÇÊãõÂæÖ„É°„Éº„É´ÈÄöÁü•',
                resultDate: null,
                deadline: 'ÊãõÂæÖ„É°„Éº„É´Âèó‰ø°Âæå48ÊôÇÈñì‰ª•ÂÜÖ',
                purchaseDate: null
            },
            {
                store: '„Éé„Ç∏„Éû„Ç™„É≥„É©„Ç§„É≥',
                storeType: 'ÂÆ∂ÈõªEC „Ç∑„Éº„ÇØ„É¨„ÉÉ„ÉàË≤©Â£≤',
                link: 'https://online.nojima.co.jp/',
                period: '‰∏çÂÆöÊúüÈñãÂÇ¨ÔºàÁèæÂú®„Ç®„É≥„Éà„É™„ÉºÂèó‰ªò‰∏≠Ôºâ',
                startDate: new Date('2025-06-10T10:00:00'),
                endDate: null,
                isOngoing: true,
                condition: '„Éé„Ç∏„Éû„Ç™„É≥„É©„Ç§„É≥‰ºöÂì°ÁôªÈå≤ÂøÖÈ†à„ÄÇ„Ç®„É≥„Éà„É™„Éº„Éö„Éº„Ç∏„Åã„ÇâÂøúÂãü„ÄÇÂÖ¨ÂºèX(@ENETJP)„Éï„Ç©„É≠„Éº„ÇÑÈÅéÂéª„ÅÆË≥ºÂÖ•Â±•Ê≠¥„ÅßÊ°àÂÜÖÁ¢∫Áéá„Åå‰∏ä„Åå„Çã„Å®„ÅÆÊÉÖÂ†±„ÅÇ„Çä„ÄÇ',
                result: '‰∏çÂÆöÊúü„ÅßÂΩìÈÅ∏ËÄÖ„ÅÆ„Åø„É°„Éº„É´Ê°àÂÜÖ',
                resultDate: null,
                deadline: 'Ê®©Âà©Áç≤Âæó„É°„Éº„É´„Å´Ë®òËºâ',
                purchaseDate: null
            },
            {
                store: '„Éû„Ç§„Éã„É≥„ÉÜ„É≥„Éâ„Éº„Çπ„Éà„Ç¢',
                storeType: '‰ªªÂ§©Â†ÇÂÖ¨Âºè Á¨¨5Âõû‰∫àÂëä',
                link: 'https://store-jp.nintendo.com/switch2',
                period: 'Á¨¨5Âõû„ÅØ7Êúà‰∏äÊó¨ÂÆüÊñΩ‰∫àÂÆö',
                startDate: new Date('2025-07-01T12:00:00'),
                endDate: new Date('2025-07-08T18:00:00'),
                condition: 'Ë©≥Á¥∞„ÅØÂæåÊó•Áô∫Ë°®„ÄÇÂèÇËÄÉ(ÂâçÂõûÊù°‰ª∂): „Éã„É≥„ÉÜ„É≥„Éâ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÈÄ£Êê∫„ÄÅ„ÇΩ„Éï„Éà„Éó„É¨„Ç§ÊôÇÈñì„ÄÅSwitch OnlineÂä†ÂÖ•Ê≠¥„Å™„Å©„ÄÇ',
                result: 'Ë©≥Á¥∞Êú™ÂÆö',
                resultDate: null,
                deadline: 'Ë©≥Á¥∞Êú™ÂÆö',
                purchaseDate: null
            },
            {
                store: '„Çª„Éñ„É≥„Éç„ÉÉ„Éà„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞',
                storeType: '„Ç≥„É≥„Éì„ÉãÁ≥ªEC Á¨¨3Âõû‰∫àÂëä',
                link: 'https://7net.omni7.jp/general/027003/250530switch2',
                period: '6/26‰ª•Èôç„Å´ÂÆüÊñΩ‰∫àÂÆö',
                startDate: new Date('2025-06-26T15:00:00'),
                endDate: null,
                condition: 'Ë©≥Á¥∞„ÅØ6/26‰ª•Èôç„Å´ÂÖ¨Âºè„Çµ„Ç§„ÉàÁ≠â„ÅßÁô∫Ë°®‰∫àÂÆö„ÄÇÂèÇËÄÉ(ÂâçÂõûÊù°‰ª∂): ÊúüÈñì‰∏≠„ÅÆË≥ºÂÖ•Â±•Ê≠¥(1000ÂÜÜ‰ª•‰∏ä)„ÄÅ„É°„É´„Éû„Ç¨Âèó‰ø°Ë®≠ÂÆö„Å™„Å©„ÄÇ',
                result: 'Ë©≥Á¥∞Êú™ÂÆö',
                resultDate: null,
                deadline: 'Ë©≥Á¥∞Êú™ÂÆö',
                purchaseDate: null
            },
            {
                store: 'LOHACO by ASKUL',
                storeType: 'Yahoo!„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞Á≥ªEC',
                link: 'https://lohaco.yahoo.co.jp/',
                period: '6/10 12:00 „Äú 6/17 11:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-10T12:00:00'),
                endDate: new Date('2025-06-17T11:59:00'),
                condition: 'ÈÅéÂéª1Âπ¥Èñì„ÅÆYahoo!„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞Ë≥ºÂÖ•Â±•Ê≠¥ÂøÖÈ†à„ÄÇËª¢Â£≤ÂØæÁ≠ñÊù°‰ª∂„ÅÇ„Çä„ÄÇ',
                result: '6/24 Áô∫Ë°®',
                resultDate: new Date('2025-06-24T12:00:00'),
                deadline: '6/30 23:59„Åæ„Åß',
                purchaseDate: new Date('2025-06-30T23:59:00')
            },
            {
                store: '„ÇΩ„Éï„Éû„ÉÉ„Éó',
                storeType: 'PC„ÉªÂÆ∂ÈõªÂ∫ó Á¨¨5Âõû',
                link: 'https://www.sofmap.com/product_detail.aspx?sku=10000002',
                period: '6/19 16:00 „Äú 6/22 10:00 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-19T16:00:00'),
                endDate: new Date('2025-06-22T10:00:00'),
                condition: '„ÇΩ„Éï„Éû„ÉÉ„Éó‰ºöÂì°ÔºãEC‰ºöÂì°ÁôªÈå≤„Éª„É°„É´„Éû„Ç¨Ë≥ºË™≠ÔºãÈÅéÂéª2Âπ¥Èñì„ÅÆË≥ºÂÖ•Â±•Ê≠¥ÂøÖÈ†à„ÄÇ',
                result: '6/25 10:00‰ª•Èôç ÂΩìÈÅ∏ËÄÖ„Å∏„É°„Éº„É´',
                resultDate: new Date('2025-06-25T10:00:00'),
                deadline: 'Â∫óËàó:6/28„Äú7/4, Web:6/25„Äú6/27',
                purchaseDate: new Date('2025-07-04T23:59:00')
            },
            {
                store: '„Éï„Ç°„Éü„É™„Éº„Éû„Éº„Éà',
                storeType: '„Ç≥„É≥„Éì„Éã „Ç¢„Éó„É™ÊäΩÈÅ∏ Á¨¨3Âõû',
                link: 'https://www.family.co.jp/campaign/spot/2506_switch2_lottery.html',
                period: '6/20 10:00 „Äú 6/22 23:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-20T10:00:00'),
                endDate: new Date('2025-06-22T23:59:00'),
                condition: '6/19ÊôÇÁÇπ„Åß„Éï„Ç°„Éü„Éö„Ç§„Ç¢„Éó„É™‰ºöÂì°„Åß„ÅÇ„Çã„Åì„Å®„ÄÇÊåáÂÆöÂ∫óËàó„Åß„ÅÆÂèóÂèñÂøÖÈ†à„ÄÇ',
                result: '6/26 12:00È†É ÂΩìÈÅ∏ËÄÖ„Å∏ÈÄöÁü•',
                resultDate: new Date('2025-06-26T12:00:00'),
                deadline: '7/4„Äú7/10',
                purchaseDate: new Date('2025-07-10T23:59:00')
            },
            {
                store: '„Ç∏„Éß„Éº„Ç∑„É≥ (Web)',
                storeType: 'ÂÆ∂ÈõªÈáèË≤©Â∫ó Á¨¨4Âõû',
                link: 'https://joshinweb.jp/game/23952.html',
                period: '6/13 10:00 „Äú 6/16 9:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-13T10:00:00'),
                endDate: new Date('2025-06-16T09:59:00'),
                condition: 'ÂØæË±°‰ºöÂì°„Å∏„ÅÆÂÄãÂà•„É°„Éº„É´ÊãõÂæÖ„ÅÆ„Åø„ÄÇ„Ç¥„Éº„É´„Éâ/„Éó„É©„ÉÅ„Éä/VIP‰ºöÂì°Ôºã„É°„É´„Éû„Ç¨ÁôªÈå≤„Å™„Å©„ÄÇ',
                result: '6/26 Â§ïÊñπ‰ª•Èôç Áô∫Ë°®‰∫àÂÆö',
                resultDate: new Date('2025-06-26T18:00:00'),
                deadline: 'ÂΩìÈÅ∏ÈÄöÁü•ÂæåÊ°àÂÜÖ',
                purchaseDate: null
            },
            {
                store: '„ÅäÂÆùÂâµÂ∫´',
                storeType: '‰∏≠Âè§ÂìÅÂ∫ó Á¨¨3Âõû',
                link: 'https://www.otakarasouko.com/g-lottery/',
                period: '6/16 12:00 „Äú 6/23 23:45 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-16T12:00:00'),
                endDate: new Date('2025-06-23T23:45:00'),
                condition: '„ÅäÂÆùÂâµÂ∫´„Ç¢„Éó„É™‰ºöÂì°ÈôêÂÆö„ÄÇ„Ç¢„Éó„É™ÂÜÖÊäΩÈÅ∏„Éö„Éº„Ç∏„Åã„ÇâÂøúÂãü„ÄÇË≥ºÂÖ•Â±•Ê≠¥‰∏çË¶Å„ÄÇ',
                result: '6/27 12:00È†É „Ç¢„Éó„É™„ÅßÈÄöÁü•',
                resultDate: new Date('2025-06-27T12:00:00'),
                deadline: '7/4 „Äú 7/6',
                purchaseDate: new Date('2025-07-06T23:59:00')
            },
            {
                store: 'Ê•ΩÂ§©„Éñ„ÉÉ„ÇØ„Çπ',
                storeType: 'ECÂ§ßÊâã Á¨¨4Âõû',
                link: 'https://books.rakuten.co.jp/event/game/switch2/',
                period: '6/18 10:00 „Äú 6/19 23:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-18T10:00:00'),
                endDate: new Date('2025-06-19T23:59:00'),
                condition: 'Ê•ΩÂ§©‰ºöÂì°ÔºãÈÅéÂéª1Âπ¥Èñì„ÅÆÊ•ΩÂ§©„Éñ„ÉÉ„ÇØ„ÇπË≥ºÂÖ•Â±•Ê≠¥ÂøÖÈ†àÔºàÈõªÂ≠êÊõ∏Á±çÁ≠âÈô§„ÅèÔºâ„ÄÇ',
                result: '6/27 È†É ÂΩìÈÅ∏ËÄÖ„Å∏„É°„Éº„É´ÈÄöÁü•',
                resultDate: new Date('2025-06-27T12:00:00'),
                deadline: 'ÂΩìÈÅ∏ÈÄöÁü•ÂæåÊ°àÂÜÖ',
                purchaseDate: null
            },
            {
                store: '„Éâ„É≥„Éª„Ç≠„Éõ„Éº„ÉÜ',
                storeType: '„Éá„Ç£„Çπ„Ç´„Ç¶„É≥„ÉàÂ∫ó Á¨¨3Âõû',
                link: 'https://www.donki.com/products/switch2_lottery/',
                period: '6/12 10:00 „Äú 6/19 23:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-12T10:00:00'),
                endDate: new Date('2025-06-19T23:59:00'),
                condition: 'majica„Ç¢„Éó„É™„Åã„ÇâÂøúÂãü„ÄÇmajica„Ç¢„Éó„É™‰ºöÂì°ÈôêÂÆö„ÄÇÊåáÂÆöÂ∫óËàó„Åß„ÅÆÂèóÂèñÂøÖÈ†à„ÄÇ',
                result: '6/27 È†É „Ç¢„Éó„É™„ÅßÈÄöÁü•',
                resultDate: new Date('2025-06-27T12:00:00'),
                deadline: 'ÂΩìÈÅ∏ÈÄöÁü•ÂæåÊ°àÂÜÖ',
                purchaseDate: null
            },
            {
                store: 'MrMax„Ç¢„Éó„É™',
                storeType: '„Éá„Ç£„Çπ„Ç´„Ç¶„É≥„ÉàÂ∫ó„Ç¢„Éó„É™ Á¨¨4Âõû',
                link: 'https://www.mrmax.co.jp/app/',
                period: '6/21 12:00 „Äú 6/23 23:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-21T12:00:00'),
                endDate: new Date('2025-06-23T23:59:00'),
                condition: 'MrMax„Ç¢„Éó„É™„Åã„ÇâÂøúÂãü„ÄÇÊúüÈñì‰∏≠„ÅÆË≥ºÂÖ•Â±•Ê≠¥‰∏çË¶Å„ÄÇÂ∫óËàóÂèóÂèñÂøÖÈ†à„ÄÇ',
                result: '6/27 15:00È†É „Ç¢„Éó„É™„ÅßÈÄöÁü•',
                resultDate: new Date('2025-06-27T15:00:00'),
                deadline: '6/28 „Äú 6/30',
                purchaseDate: new Date('2025-06-30T23:59:00')
            },
            {
                store: 'GEO',
                storeType: '„Ç®„É≥„Çø„É°Â∫ó Á¨¨2Âõû (2Ê¨°Áô∫Ë°®)',
                link: 'https://geo-online.co.jp/news/726',
                period: '6/12 11:00 „Äú 6/17 17:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-12T11:00:00'),
                endDate: new Date('2025-06-17T17:59:00'),
                condition: 'GEO„Ç¢„Éó„É™ÔºãÂ∞ÇÁî®„Çµ„Ç§„Éà„ÄÇPonta„Ç´„Éº„ÉâÈÄ£Êê∫ÂøÖÈ†à„ÄÇÊú™ÂΩìÈÅ∏ËÄÖÂÑ™ÂÖà„Ç∑„Çπ„ÉÜ„É†„ÅÇ„Çä„ÄÇ',
                result: '1ÂõûÁõÆ: 6/20Áô∫Ë°®Ê∏à„ÄÅ2ÂõûÁõÆ: 6/27 Áô∫Ë°®‰∫àÂÆö',
                resultDate: new Date('2025-06-27T12:00:00'),
                deadline: '2ÂõûÁõÆ: 6/28„Äú7/1',
                purchaseDate: new Date('2025-07-01T23:59:00')
            },
            {
                store: '„É§„Éû„ÉÄ„Éá„É≥„Ç≠',
                storeType: 'ÂÆ∂ÈõªÈáèË≤©Â∫ó Á¨¨2Âõû (3ÂõûÁõÆÁô∫Ë°®)',
                link: 'https://www.yamada-denkiweb.com/site/wevent/20250530_switch2.html',
                period: '5/30 „Äú 6/1 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-05-30T10:00:00'),
                endDate: new Date('2025-06-01T23:59:00'),
                condition: '„É§„Éû„ÉÄ„Éá„Ç∏„Çø„É´‰ºöÂì°ÔºãÊúüÈñì‰∏≠„ÅÆË≥ºÂÖ•ÂÆüÁ∏æ„ÄÇ1Âõû„ÅÆÂøúÂãü„Åß3ÂõûÊäΩÈÅ∏„ÉÅ„É£„É≥„Çπ„ÄÇ',
                result: 'Á¨¨1,2Âõû: Áô∫Ë°®Ê∏à„ÄÅÁ¨¨3Âõû: 6/27 Áô∫Ë°®‰∫àÂÆö',
                resultDate: new Date('2025-06-27T18:00:00'),
                deadline: 'ÂêÑÂõûÁô∫Ë°®Âæå3Êó•Èñì',
                purchaseDate: new Date('2025-06-30T23:59:00')
            },
            {
                store: '„Ç®„Éá„Ç£„Ç™„É≥',
                storeType: 'ÂÆ∂ÈõªÈáèË≤©Â∫ó Á¨¨3Âõû',
                link: 'https://www.edion.com/topics/detail.html?_prcm_id=27572',
                period: '6/12 10:00 „Äú 6/15 23:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-12T10:00:00'),
                endDate: new Date('2025-06-15T23:59:00'),
                condition: 'ÂêÑÁ®Æ„Ç®„Éá„Ç£„Ç™„É≥‰ºöÂì°„ÅÆ„ÅÑ„Åö„Çå„Åã„ÄÇ„Ç¢„Éó„É™‰ºöÂì°„ÅØÂç≥ÊôÇÁôªÈå≤ÂèØËÉΩ„ÄÇ',
                result: '„Éç„ÉÉ„Éà: 6/24Ê∏à, Â∫óËàó: 6/27 Áô∫Ë°®‰∫àÂÆö',
                resultDate: new Date('2025-06-27T12:00:00'),
                deadline: 'ÂΩìÈÅ∏ÈÄöÁü•ÂæåÊ°àÂÜÖ',
                purchaseDate: null
            },
            {
                store: '„Ç∏„Éß„Éº„Ç∑„É≥ („Ç¢„Éó„É™)',
                storeType: 'ÂÆ∂ÈõªÈáèË≤©Â∫ó Á¨¨5Âõû',
                link: 'https://joshinweb.jp/app.html',
                period: '6/20 0:00 „Äú 6/22 23:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-20T00:00:00'),
                endDate: new Date('2025-06-22T23:59:00'),
                condition: 'VIP/„Éó„É©„ÉÅ„Éä/„Ç¥„Éº„É´„Éâ„Çπ„Éû„Ç§„É´‰ºöÂì°ÈôêÂÆö„ÄÇ„Ç∏„Éß„Éº„Ç∑„É≥„Ç¢„Éó„É™„Åã„ÇâÂøúÂãü„ÄÇ',
                result: '7/4 15:00È†É Áô∫Ë°®‰∫àÂÆö',
                resultDate: new Date('2025-07-04T15:00:00'),
                deadline: '7/5„Äú7/8',
                purchaseDate: new Date('2025-07-08T23:59:00')
            },
            {
                store: '„Éì„ÉÉ„ÇØ„Ç´„É°„É© (Â∫óËàó)',
                storeType: 'ÂÆ∂ÈõªÈáèË≤©Â∫ó Á¨¨3Âõû',
                link: 'https://www.biccamera.com/bc/c/sale/special/lottery/switch2_order.html',
                period: '6/21„Äú6/23 (Ë≥ºÂÖ•ÊúüÈñìÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-13T10:00:00'),
                endDate: new Date('2025-06-15T23:59:00'),
                condition: 'Á¨¨3ÂõûÂΩìÈÅ∏ËÄÖ„ÅÆ„Åø„ÄÇ„Ç¢„Éó„É™‰ºöÂì°ÔºãÈÅéÂéª„ÅÆË≥ºÂÖ•Â±•Ê≠¥(5ÂçÉÂÜÜ‰ª•‰∏ä)„Å™„Å©„ÄÇ',
                result: '6/20Áô∫Ë°®Ê∏à„Åø',
                resultDate: new Date('2025-06-20T10:00:00'),
                deadline: 'Ë≥ºÂÖ•ÊúüÈñìÁµÇ‰∫Ü',
                purchaseDate: new Date('2025-06-23T21:00:00')
            },
            {
                store: 'XPRICEÊú¨Â∫ó',
                storeType: 'ÂÆ∂ÈõªEC Á¨¨2Âõû',
                link: 'https://www.xprice.co.jp/b4.php?id=89612',
                period: '6/19„Äú6/23 9:00 (Ë≥ºÂÖ•ÊúüÈñìÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-10T12:00:00'),
                endDate: new Date('2025-06-16T23:59:00'),
                condition: 'Á¨¨2ÂõûÂΩìÈÅ∏ËÄÖ„ÅÆ„Åø„ÄÇXPRICE‰ºöÂì°ÔºãÊúüÈñì‰∏≠„ÅÆË≥ºÂÖ•Â±•Ê≠¥„ÄÇ',
                result: '6/19 12:00Áô∫Ë°®Ê∏à„Åø',
                resultDate: new Date('2025-06-19T12:00:00'),
                deadline: 'Ë≥ºÂÖ•ÊúüÈñìÁµÇ‰∫Ü',
                purchaseDate: new Date('2025-06-23T09:00:00')
            },
            {
                store: '„Éì„ÉÉ„ÇØ„Ç´„É°„É© („Ç™„É≥„É©„Ç§„É≥)',
                storeType: 'ÂÆ∂ÈõªÈáèË≤©Â∫ó Á¨¨2Âõû',
                link: 'https://www.biccamera.com/bc/c/sale/special/lottery/switch2_order.html',
                period: '6/20„Äú6/22 (Ë≥ºÂÖ•ÊúüÈñìÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-10T08:00:00'),
                endDate: new Date('2025-06-12T20:59:00'),
                condition: 'Á¨¨2ÂõûÂΩìÈÅ∏ËÄÖ„ÅÆ„Åø„ÄÇ„Ç™„É≥„É©„Ç§„É≥‰ºöÂì°ÔºãÈÅéÂéª„ÅÆË≥ºÂÖ•Â±•Ê≠¥(5‰∏áÂÜÜ‰ª•‰∏ä)„Å™„Å©„ÄÇ',
                result: '6/19 17:00Áô∫Ë°®Ê∏à„Åø',
                resultDate: new Date('2025-06-19T17:00:00'),
                deadline: 'Ë≥ºÂÖ•ÊúüÈñìÁµÇ‰∫Ü',
                purchaseDate: new Date('2025-06-22T20:59:00')
            },
            {
                store: 'ÈßøÊ≤≥Â±ã',
                storeType: '„Ç≤„Éº„É†Â∞ÇÈñÄÂ∫ó SNSÊäΩÈÅ∏',
                link: 'https://www.suruga-ya.jp/',
                period: '6/16„Äú6/22 (ÊîØÊâï„ÅÑÊúüÈñìÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-09T12:00:00'),
                endDate: new Date('2025-06-15T23:59:00'),
                condition: 'ÂΩìÈÅ∏ËÄÖ„ÅÆ„Åø„ÄÇSNS„Éï„Ç©„É≠„ÉºÔºÜ„É™„Éù„Çπ„ÉàÔºã„Çµ„Ç§„ÉàÁôªÈå≤ÂøÖÈ†à„ÄÇ',
                result: '6/16Áô∫Ë°®Ê∏à„Åø',
                resultDate: new Date('2025-06-16T12:00:00'),
                deadline: 'ÊîØÊâï„ÅÑÊúüÈñìÁµÇ‰∫Ü',
                purchaseDate: new Date('2025-06-22T23:59:00')
            },
            {
                store: '„É®„Éâ„Éê„Ç∑„Ç´„É°„É©',
                storeType: 'ÂÆ∂ÈõªÈáèË≤©Â∫ó Á¨¨2Âõû',
                link: 'https://limited.yodobashi.com/',
                period: '6/6 7:00 „Äú 6/9 10:59 (ÁµÇ‰∫Ü)',
                startDate: new Date('2025-06-06T07:00:00'),
                endDate: new Date('2025-06-09T10:59:00'),
                condition: '„É®„Éâ„Éê„Ç∑‰ºöÂì°„ÄÇ2023Âπ¥6Êúà‰ª•Èôç„Å´„É®„Éâ„Éê„Ç∑„Éª„Éâ„ÉÉ„Éà„Éª„Ç≥„É†Ë≥ºÂÖ•Â±•Ê≠¥ or Â∫óËàóË≥ºÂÖ•Â±•Ê≠¥Ôºã„Éù„Ç§„É≥„ÉàÂÖ±ÈÄöÂåñÊ∏à„Åø„ÄÇ',
                result: '6/11 9:00 Áô∫Ë°®Ê∏à„Åø',
                resultDate: new Date('2025-06-11T09:00:00'),
                deadline: '6/11„Äú6/17',
                purchaseDate: new Date('2025-06-17T23:59:00')
            }
        ];

        let currentSortMode = 'priority';
        let currentSortDirection = 'asc';
        let currentFilter = 'all';

        const searchInput = document.getElementById('searchInput');
        const tableBody = document.getElementById('tableBody');
        const noResults = document.getElementById('noResults');

        searchInput.addEventListener('input', function () {
            applyFiltersAndSort();
        });

        function filterRows(status) {
            currentFilter = status;
            const buttons = document.querySelectorAll('.filter-btn');

            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            applyFiltersAndSort();
        }

        function sortByColumn(column) {
            if (currentSortMode === column) {
                currentSortDirection = currentSortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                currentSortMode = column;
                currentSortDirection = 'asc';
            }

            updateSortHeaders();
            applyFiltersAndSort();
        }

        function updateSortHeaders() {
            const headers = document.querySelectorAll('th.sortable');
            headers.forEach(header => {
                header.classList.remove('sort-asc', 'sort-desc');
                if (header.dataset.sort === currentSortMode) {
                    header.classList.add(currentSortDirection === 'asc' ? 'sort-asc' : 'sort-desc');
                }
            });
        }

        window.filterRows = filterRows;
        window.sortByColumn = sortByColumn;

        function applyFiltersAndSort() {
            const searchTerm = searchInput.value.toLowerCase();
            let filteredData = storeData.filter(item => {
                const matchesSearch = item.store.toLowerCase().includes(searchTerm);

                item.status = calculateStatus(item);

                const matchesFilter = currentFilter === 'all' || item.status === currentFilter;

                return matchesSearch && matchesFilter;
            });

            filteredData.sort((a, b) => {
                const statusPriority = {
                    'active': 1,
                    'purchase': 2,
                    'upcoming': 3,
                    'waiting': 4,
                    'ended': 5
                };

                const priorityA = statusPriority[a.status] || 6;
                const priorityB = statusPriority[b.status] || 6;

                if (priorityA !== priorityB) {
                    return priorityA - priorityB;
                }

                if (a.status === 'active' || a.status === 'upcoming') {
                    const dateA = a.endDate || a.startDate;
                    const dateB = b.endDate || b.startDate;
                    if (!dateA && !dateB) return 0;
                    if (!dateA) return 1;
                    if (!dateB) return -1;
                    return dateA.getTime() - dateB.getTime();
                } else if (a.status === 'waiting' || a.status === 'purchase') {
                    const dateA = a.resultDate;
                    const dateB = b.resultDate;
                    if (!dateA && !dateB) return 0;
                    if (!dateA) return 1;
                    if (!dateB) return -1;
                    return dateA.getTime() - dateB.getTime();
                }

                return (b.endDate || 0) - (a.endDate || 0);
            });

            renderTable(filteredData);
            updateStats(storeData);
        }

        function renderTable(data) {
            let html = '';
            let currentSection = '';

            data.forEach(item => {
                item.status = calculateStatus(item);

                let sectionTitle = '';
                switch (item.status) {
                    case 'active':
                        sectionTitle = 'üî• ÂøúÂãüÂèó‰ªò‰∏≠';
                        break;
                    case 'purchase':
                        sectionTitle = 'üí∞ Ë≥ºÂÖ•ÊúüÈñì';
                        break;
                    case 'upcoming':
                        sectionTitle = 'üìÖ ÈñãÂßã‰∫àÂÆö';
                        break;
                    case 'waiting':
                        sectionTitle = '‚è≥ ÁµêÊûúÁô∫Ë°®ÂæÖ„Å°';
                        break;
                    case 'ended':
                        sectionTitle = '‚úÖ ÁµÇ‰∫ÜÊ∏à„Åø';
                        break;
                    default:
                        sectionTitle = 'üì¢ „Åù„ÅÆ‰ªñ';
                }

                if (sectionTitle !== currentSection) {
                    currentSection = sectionTitle;
                    html += `<tr class="section-header">
      <td colspan="7">
       <strong>${sectionTitle}</strong>
      </td>
      </tr>`;
                }

                let urgencyClass = '';
                if (isEndingToday(item) && item.status === 'active') {
                    urgencyClass = 'last-chance';
                } else if (item.purchaseDate && item.status === 'purchase') {
                    const now = new Date('2025-06-24T10:00:00');
                    const timeDiff = item.purchaseDate.getTime() - now.getTime();
                    const hoursDiff = timeDiff / (1000 * 60 * 60);
                    if (hoursDiff <= 24 && hoursDiff > 0) {
                        urgencyClass = 'today-ending';
                    }
                }

                const showNewBadge = item.startDate && (new Date('2025-06-24T10:00:00') - new Date(item
                    .startDate)) < 3 * 24 * 60 * 60 * 1000;

                html += `<tr data-status="${item.status}" class="${urgencyClass}" data-store="${item.store}">
      <td>
       <div class="store-name">
        ${item.store}
        ${showNewBadge ? '<span class="new-badge">NEW</span>' : ''}
       </div>
       <div class="store-type">${item.storeType}</div>
      </td>
      <td><span class="status status-${item.status}">${getStatusText(item.status)}</span></td>
      <td><a href="${item.link}" target="_blank" class="link-btn">${getButtonText(item.status)}</a></td>
      <td>
       <div class="period">${item.period}</div>
      </td>
      <td><div class="condition">${item.condition}</div></td>
      <td><div class="result">${item.result}</div></td>
      <td><div class="deadline">${item.deadline}</div></td>
     </tr>`;
            });

            tableBody.innerHTML = html;

            if (data.length === 0) {
                noResults.classList.remove('hidden');
            } else {
                noResults.classList.add('hidden');
            }
        }

        function getStatusText(status) {
            const statusMap = {
                'active': 'Âèó‰ªò‰∏≠',
                'upcoming': 'ÈñãÂßã‰∫àÂÆö',
                'waiting': 'Áô∫Ë°®ÂæÖ„Å°',
                'purchase': 'Ë≥ºÂÖ•ÊúüÈñì',
                'ended': 'ÁµÇ‰∫ÜÊ∏à„Åø'
            };
            return statusMap[status] || status;
        }

        function getButtonText(status) {
            const buttonMap = {
                'active': 'ÂøúÂãü„É™„É≥„ÇØ',
                'upcoming': 'Á¢∫Ë™ç„É™„É≥„ÇØ',
                'waiting': 'Á¢∫Ë™ç„É™„É≥„ÇØ',
                'purchase': 'Ë≥ºÂÖ•„É™„É≥„ÇØ',
                'ended': 'Á¢∫Ë™ç„É™„É≥„ÇØ'
            };
            return buttonMap[status] || 'Á¢∫Ë™ç„É™„É≥„ÇØ';
        }

        function updateStats(data = storeData) {
            const stats = {
                active: 0,
                upcoming: 0,
                waiting: 0,
                purchase: 0
            };

            data.forEach(item => {
                const status = calculateStatus(item);
                if (stats.hasOwnProperty(status)) {
                    stats[status]++;
                }
            });

            Object.keys(stats).forEach(key => {
                const element = document.getElementById(`stat-${key}`);
                if (element) {
                    element.textContent = stats[key];
                }
            });
        }

        updateSortHeaders();
        applyFiltersAndSort();
    </script>
</body>

</html>
